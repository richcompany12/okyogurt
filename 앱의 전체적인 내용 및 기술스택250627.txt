# ìš”ê±°íŠ¸ ì•„ì´ìŠ¤í¬ë¦¼ ì£¼ë¬¸ì•± ì „ì²´ ë¬¸ì„œ

## ì•± ê°œìš”

### ê¸°ë³¸ ì •ë³´
- **ì•± íƒ€ì…**: ìš”ê±°íŠ¸ ì•„ì´ìŠ¤í¬ë¦¼ ì£¼ë¬¸ì•±
- **ê¸°ìˆ  ìŠ¤íƒ**: React (í”„ë¡ íŠ¸ì—”ë“œ) + Firebase (ë°±ì—”ë“œ)
- **ëŒ€ìƒ**: ì œíœ´ìƒì  ë°©ë¬¸ ê³ ê°
- **ë°°í¬**: Firebase Hosting

### ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸
- ì¼ë°˜ ê³ ê° ëŒ€ìƒì´ ì•„ë‹Œ **ì œíœ´ìƒì  ê¸°ë°˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ**
- ì œíœ´ìƒì (ì‚¼ê²¹ì‚´ì§‘ ë“±)ì— QRì½”ë“œ ë¶€ì°©
- ê³ ê°ì´ QRì½”ë“œ ìŠ¤ìº” â†’ ì•± ì£¼ë¬¸í™”ë©´ ì ‘ì†
- í›„ì‹ ê°œë…ìœ¼ë¡œ ì•„ì´ìŠ¤í¬ë¦¼ ì£¼ë¬¸
- **ì§ì ‘ ë°°ë‹¬** ë°©ì‹

### ì œíœ´ìƒì  í˜œíƒ
1. **í¬ì¸íŠ¸ í˜ì´ë°±**: ì£¼ë¬¸ ê¸ˆì•¡ì˜ ì¼ì • í¼ì„¼íŠ¸ ì ë¦½ (ê±°ë¦¬/ì ê·¹ì„±ì— ë”°ë¼ ì°¨ë“±)
2. **ì„œë¹„ìŠ¤ ì°¨ë³„í™”**: ì™¸ë¶€ìŒì‹ ë°˜ì… ê¸ˆì§€ â†’ í›„ì‹ ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì œê³µ

## ì•± ì•„í‚¤í…ì²˜

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
src/
â”œâ”€â”€ App.js                    # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸ ë° ë¼ìš°íŒ…
â”œâ”€â”€ index.js                  # React ì•± ì§„ì…ì 
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.js        # ì¸ì¦ ì»¨í…ìŠ¤íŠ¸ (ì¶”ì •)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Login.js              # ë¡œê·¸ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AdminDashboard.js     # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ UserOrder.js          # ë©”ì¸ í™ˆí˜ì´ì§€
â”‚   â”œâ”€â”€ PaymentComplete.js    # ê²°ì œ ì™„ë£Œ í˜ì´ì§€
â”‚   â”œâ”€â”€ gifticon/
â”‚   â”‚   â””â”€â”€ CustomerGifticonCheck.js  # ê¸°í”„í‹°ì½˜ í™•ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ [ë²•ì  í˜ì´ì§€ë“¤]
â”‚       â”œâ”€â”€ TermsPage.js      # ì´ìš©ì•½ê´€
â”‚       â”œâ”€â”€ PrivacyPolicy.js  # ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
â”‚       â”œâ”€â”€ RefundPolicy.js   # í™˜ë¶ˆì •ì±…
â”‚       â””â”€â”€ CompanyInfo.js    # ì‚¬ì—…ìì •ë³´
â””â”€â”€ pages/
    â””â”€â”€ OrderPage.js          # QRì½”ë“œ ì£¼ë¬¸ í˜ì´ì§€
```

### Firebase ì„¤ì •
```json
{
  "functions": { "runtime": "nodejs18" },
  "hosting": { 
    "public": "build",
    "rewrites": [{"source": "**", "destination": "/index.html"}]
  }
}
```

## ë¼ìš°íŒ… êµ¬ì¡°

### ê³µê°œ í˜ì´ì§€
- `/` - ë©”ì¸ í™ˆí˜ì´ì§€ (UserOrder ì»´í¬ë„ŒíŠ¸)
- `/order/:storeId` - ìƒì ë³„ QRì½”ë“œ ì£¼ë¬¸ í˜ì´ì§€
- `/check/:gifticonId` - ê¸°í”„í‹°ì½˜ ì”ì•¡/ë‚´ì—­ í™•ì¸
- `/terms` - ì´ìš©ì•½ê´€
- `/privacy` - ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
- `/refund` - í™˜ë¶ˆì •ì±…
- `/company` - ì‚¬ì—…ìì •ë³´
- `/payment-complete` - ê²°ì œ ì™„ë£Œ

### ê´€ë¦¬ì í˜ì´ì§€
- `/admin` - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (ê¶Œí•œ ì²´í¬ í¬í•¨)

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì£¼ë¬¸ ì‹œìŠ¤í…œ
- **QRì½”ë“œ ê¸°ë°˜ ì£¼ë¬¸**: `/order/:storeId` ê²½ë¡œë¡œ ìƒì ë³„ ì£¼ë¬¸
- **ìµœì†Œ ì •ë³´ ìˆ˜ì§‘**: ì „í™”ë²ˆí˜¸ë§Œ í•„ìˆ˜, í…Œì´ë¸”ë²ˆí˜¸/ìš”ì²­ì‚¬í•­ì€ ì„ íƒ
- **ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤**:
  1. ê³ ê° ì£¼ë¬¸ â†’ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼
  2. ê´€ë¦¬ìê°€ ë°°ë‹¬ì†Œìš”ì‹œê°„ ì„ íƒ í›„ ì£¼ë¬¸í™•ì¸
  3. ê³ ê°ì—ê²Œ SMS ì•Œë¦¼ ë°œì†¡
  4. ë°°ë‹¬ ì™„ë£Œ í›„ ì£¼ë¬¸ì™„ë£Œ ì²˜ë¦¬

### 2. ê¸°í”„í‹°ì½˜ ì‹œìŠ¤í…œ
- **ì¶©ì „ì‹ ê¸°í”„í‹°ì½˜**: QRì½”ë“œ ìƒì„± í›„ ë¼ë²¨ì§€ ì¶œë ¥
- **ì‹¤ë¬¼ì¹´ë“œ**: ë§¤ì¥ ì ë¦½ì¹´ë“œì— ê¸°í”„í‹°ì½˜ QR ë¶€ì°©
- **ê³ ê° ê¸°ëŠ¥**: 
  - ì”ì•¡/ì‚¬ìš©ë‚´ì—­ í™•ì¸ (`/check/:gifticonId`)
  - ë§¤ì¥ ì „í™”ê±¸ê¸° ë²„íŠ¼
- **ê´€ë¦¬ì ê¸°ëŠ¥**:
  - ìŠ¤ìº”ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•œ ì¦‰ì‹œ ì‚¬ìš©ì²˜ë¦¬
  - ì¶©ì „, ì‚¬ìš©ì •ì§€, ì‚¬ìš©ì¬ê°œ ê´€ë¦¬

### 3. ì‚¬ìš©ì ê¶Œí•œ ì‹œìŠ¤í…œ
```javascript
// AuthContextì—ì„œ ì œê³µí•˜ëŠ” ê¶Œí•œ
const { currentUser, userRole, isAdmin, isShopOwner, isPartner } = useAuth();
```
- **isAdmin**: ê´€ë¦¬ì ê¶Œí•œ
- **isPartner**: íŒŒíŠ¸ë„ˆ ê¶Œí•œ  
- **isShopOwner**: ìƒì  ì˜¤ë„ˆ ê¶Œí•œ (ì¶”ì •)

## ì»´í¬ë„ŒíŠ¸ ë¶„ì„

### App.js
- **ì£¼ìš” ê¸°ëŠ¥**: ë¼ìš°íŒ… ë° ê¶Œí•œ ê¸°ë°˜ í˜ì´ì§€ ì ‘ê·¼ ì œì–´
- **ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬**: 
  - `react-router-dom`: BrowserRouter, Routes, Route
  - `AuthContext`: ì»¤ìŠ¤í…€ ì¸ì¦ ì»¨í…ìŠ¤íŠ¸
- **íŠ¹ì§•**: ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ ì‹œ ê¶Œí•œ ì²´í¬ ë° ì—ëŸ¬ í˜ì´ì§€ í‘œì‹œ

### ê¶Œí•œ ë³´í˜¸ ë¡œì§
```javascript
!currentUser ? <Login /> : 
(!isAdmin && !isPartner) ? <AccessDenied /> : 
<AdminDashboard />
```

## ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì˜ì¡´ì„±

### package.json ë¶„ì„
```json
{
  "name": "okyogurt",
  "version": "0.1.0",
  "dependencies": {
    "@portone/browser-sdk": "^0.0.21",     // í¬íŠ¸ì› ê²°ì œ SDK
    "@zxing/library": "^0.21.3",          // QRì½”ë“œ ìŠ¤ìº” ë¼ì´ë¸ŒëŸ¬ë¦¬
    "firebase": "^11.8.1",                // Firebase SDK
    "html2canvas": "^1.4.1",              // HTMLì„ ìºì¹˜ë¡œ ë³€í™˜
    "qrcode": "^1.5.4",                   // QRì½”ë“œ ìƒì„±
    "react": "^19.1.0",                   // React í”„ë ˆì„ì›Œí¬
    "react-dom": "^19.1.0",               // React DOM
    "react-qr-code": "^2.0.15",           // React QRì½”ë“œ ì»´í¬ë„ŒíŠ¸
    "react-router-dom": "^7.6.1",         // React ë¼ìš°íŒ…
    "react-scripts": "5.0.1"              // Create React App ìŠ¤í¬ë¦½íŠ¸
  }
}
```

## ì¸ì¦ ì‹œìŠ¤í…œ (AuthContext.js)

### ì£¼ìš” ê¸°ëŠ¥
- **Firebase Auth + Firestore í†µí•© ì¸ì¦**
- **ë‹¤ì¤‘ ê¶Œí•œ ì‹œìŠ¤í…œ**: super_admin, admin, store_owner, partner
- **ì‹¤ì‹œê°„ ìƒíƒœ ê´€ë¦¬**: onAuthStateChanged ì‚¬ìš©

### ê¶Œí•œ ì²´ê³„
```javascript
const isAdmin = userRole === 'super_admin' || userRole === 'admin';
const isShopOwner = userRole === 'store_owner';
const isPartner = userRole === 'partner' || userRole === 'store_owner';
const isSuperAdmin = userRole === 'super_admin';
```

### ì œê³µí•˜ëŠ” í•¨ìˆ˜ë“¤
- `login(email, password)` - Firebase Auth + Firestore ì¡°íšŒ
- `signup(email, password, role)` - ê³„ì • ìƒì„± + Firestore ì €ì¥
- `logout()` - ë¡œê·¸ì•„ì›ƒ ë° ìƒíƒœ ì´ˆê¸°í™”

### Firestore ì»¬ë ‰ì…˜ êµ¬ì¡°
- `users` ì»¬ë ‰ì…˜: ì‚¬ìš©ì ì •ë³´ ë° ê¶Œí•œ ì €ì¥
  - email, role, createdAt, updatedAt, isActive
  - store_ownerì˜ ê²½ìš° storeId í•„ë“œ ì¶”ê°€

## ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (AdminDashboard.js)

### ë©”ë‰´ êµ¬ì¡°
```javascript
const menuItems = [
  { id: 'orders', name: 'ì£¼ë¬¸ ê´€ë¦¬', icon: 'ğŸ“‹', adminOnly: true },
  { id: 'business', name: 'ì˜ì—…ì‹œê°„ ê´€ë¦¬', icon: 'ğŸ•', adminOnly: true },
  { id: 'stores', name: 'ìƒì  ê´€ë¦¬', icon: 'ğŸª', adminOnly: true },
  { id: 'menu', name: 'ë©”ë‰´ ê´€ë¦¬', icon: 'ğŸ¦', adminOnly: true },
  { id: 'gifticon', name: 'ê¸°í”„í‹°ì½˜ ê´€ë¦¬', icon: 'ğŸ', adminOnly: true },
  { id: 'points', name: 'í¬ì¸íŠ¸ ë‚´ì—­', icon: 'ğŸ’', adminOnly: false },
  { id: 'accounts', name: 'ê³„ì • ê´€ë¦¬', icon: 'ğŸ‘¤', adminOnly: true },
  { id: 'stats', name: 'í†µê³„ ë¶„ì„', icon: 'ğŸ“Š', adminOnly: true }
];
```

### ì£¼ìš” íŠ¹ì§•
- **ê¶Œí•œë³„ ë©”ë‰´ í•„í„°ë§**: adminOnly ì†ì„±ìœ¼ë¡œ ë©”ë‰´ ì ‘ê·¼ ì œí•œ
- **ì•Œë¦¼ ì‹œìŠ¤í…œ**: NotificationManager ì»´í¬ë„ŒíŠ¸ í†µí•©
- **ëª¨ë°”ì¼ ë°˜ì‘í˜•**: ëª¨ë°”ì¼ ì‚¬ì´ë“œë°” í† ê¸€ ê¸°ëŠ¥
- **ì•Œë¦¼ í† ê¸€**: localStorage ê¸°ë°˜ ì•Œë¦¼ ON/OFF ì„¤ì •

### ì»´í¬ë„ŒíŠ¸ ì˜ì¡´ì„±
- OrderManagement, StoreManagement, MenuManagement
- GifticonManagement, PointsManagement, BusinessHoursManagement
- StatsDashboard, AccountManagement, NotificationManager

## QRì½”ë“œ ì£¼ë¬¸ í˜ì´ì§€ (OrderPage.js)

### í•µì‹¬ ê¸°ëŠ¥

#### 1. ë””ë²„ê¹… ì‹œìŠ¤í…œ
- **mobile_debug_logs**: localStorage ê¸°ë°˜ ëª¨ë°”ì¼ ë””ë²„ê¹…
- **debugLogger**: ìƒì„¸í•œ ë¡œê¹… ì‹œìŠ¤í…œ (100ê°œ ë¡œê·¸ ì œí•œ)
- **PC í™•ì¸ í•¨ìˆ˜**: `window.getDebugLogs()`, `window.clearDebugLogs()`

#### 2. ì£¼ë¬¸ ì²˜ë¦¬ íë¦„
```javascript
// ì£¼ë¬¸ ë°ì´í„° êµ¬ì¡°
const orderData = {
  orderNumber: 'ORD' + Date.now(),
  storeId, storeName, items, amount,
  phone, tableNumber, specialRequests,
  paymentId, paymentStatus, paymentResponse,  // ê²°ì œ ì •ë³´
  status: 'paid' | 'pending',
  createdAt: new Date()
};
```

#### 3. í¬ì¸íŠ¸ ì ë¦½ ì‹œìŠ¤í…œ
- **ìë™ í¬ì¸íŠ¸ ì ë¦½**: ì£¼ë¬¸ ì™„ë£Œ ì‹œ ìƒì  í¬ì¸íŠ¸ìœ¨ì— ë”°ë¼ ì ë¦½
- **Firestore ì»¬ë ‰ì…˜**: 
  - `store_points`: í¬ì¸íŠ¸ ì ë¦½ ë‚´ì—­
  - `store_point_balance`: ìƒì ë³„ í¬ì¸íŠ¸ ì”ì•¡

#### 4. SMS ì•Œë¦¼ ì‹œìŠ¤í…œ
```javascript
const SMS_ENDPOINT = 'https://sendtestsms-b245qv2hpq-uc.a.run.app';
// ê´€ë¦¬ìì—ê²Œ ìƒˆì£¼ë¬¸ ì•Œë¦¼ ë°œì†¡
```

#### 5. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **ìµœì†Œì£¼ë¬¸ê¸ˆì•¡**: 11,000ì› ì´ìƒ
- **ë°°ì†¡ë¹„**: 11,000ì› ë¯¸ë§Œ ì‹œ 10ì›
- **ìƒì ëª… 7íšŒ í„°ì¹˜**: ê´€ë¦¬ì ëª¨ë“œ ì ‘ê·¼
- **ì˜ì—…ì‹œê°„ ì²´í¬**: useBusinessHours í›… ì‚¬ìš©

### ì£¼ìš” ìƒíƒœ ê´€ë¦¬
```javascript
const [store, setStore] = useState(null);           // ìƒì  ì •ë³´
const [menus, setMenus] = useState([]);             // ë©”ë‰´ ëª©ë¡
const [cart, setCart] = useState([]);               // ì¥ë°”êµ¬ë‹ˆ
const [selectedMenu, setSelectedMenu] = useState(null);
const [showCart, setShowCart] = useState(false);
const [showOrderForm, setShowOrderForm] = useState(false);
```

## ê¸°í”„í‹°ì½˜ ì‹œìŠ¤í…œ

### CustomerGifticonCheck.js - ê³ ê°ìš© ê¸°í”„í‹°ì½˜ í™•ì¸
- **ë¼ìš°íŒ…**: `/check/:gifticonId`
- **ê¸°ëŠ¥**: ì”ì•¡ ì¡°íšŒ, ì‚¬ìš©ë‚´ì—­ í™•ì¸, ë§¤ì¥ ì „í™”ê±¸ê¸°
- **ìƒíƒœ í‘œì‹œ**: ì‚¬ìš©ê°€ëŠ¥, ë§Œë£Œ, ì‚¬ìš©ì •ì§€ ë“±
- **UI**: ê·¸ë¼ë°ì´ì…˜ ê¸°ë°˜ ëª¨ë˜í•œ ë””ìì¸

### GifticonDashboard.js - ê´€ë¦¬ììš© ê¸°í”„í‹°ì½˜ ê´€ë¦¬
- **í†µí•© ëŒ€ì‹œë³´ë“œ**: ìƒì„±, ê´€ë¦¬, ì‚¬ìš©ì²˜ë¦¬, í†µê³„
- **AdminQRScanner**: í†µí•©ëœ QR ìŠ¤ìº” ë° ì‚¬ìš©ì²˜ë¦¬
- **ì‹¤ì‹œê°„ Firebase ì—°ë™**

### ì˜ì¡´ ì„œë¹„ìŠ¤
- **GifticonService**: Firebase ê¸°í”„í‹°ì½˜ CRUD ì‘ì—…
- **GifticonUtils**: í¬ë§·íŒ…, ìƒíƒœ ê³„ì‚° ìœ í‹¸ë¦¬í‹°

## Firebase ì»¬ë ‰ì…˜ êµ¬ì¡°

### ì£¼ìš” ì»¬ë ‰ì…˜
1. **users**: ì‚¬ìš©ì ì •ë³´ ë° ê¶Œí•œ
2. **stores**: ì œíœ´ìƒì  ì •ë³´ ë° í¬ì¸íŠ¸ìœ¨
3. **menus**: ë©”ë‰´ ì •ë³´ (category, isAvailable)
4. **orders**: ì£¼ë¬¸ ì •ë³´ (ê²°ì œìƒíƒœ í¬í•¨)
5. **store_points**: í¬ì¸íŠ¸ ì ë¦½ ë‚´ì—­
6. **store_point_balance**: ìƒì ë³„ í¬ì¸íŠ¸ ì”ì•¡
7. **gifticons**: ê¸°í”„í‹°ì½˜ ì •ë³´ (Firebase ìë™ ìƒì„±)

## ë©”ì¸ í™ˆí˜ì´ì§€ (UserOrder.js)

### ì „ëµì  ëœë”©í˜ì´ì§€ ê¸°ëŠ¥
- **ë§¤ì¥ ì„ íƒ í˜ì´ì§€**: Firebaseì—ì„œ ì‹¤ì‹œê°„ ë§¤ì¥ ëª©ë¡ ë¡œë“œ
- **ì‹œë²” ìš´ì˜ì **: ê³ ì • ID `ntNHEyN6dubXeLwAAssS`ë¡œ ì§ì ‘ ì²´í—˜ ê°€ëŠ¥
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì–´í•„**: í˜ì‹  ê¸°ìˆ , ì‹œìŠ¤í…œ ì†Œê°œ, íŒŒíŠ¸ë„ˆì‹­ ë¬¸ì˜

### Firebase ì¿¼ë¦¬
```javascript
const storesQuery = query(
  collection(db, 'stores'),
  orderBy('createdAt', 'desc')
);
```

### ì£¼ìš” UI ì„¹ì…˜
1. **Hero Section**: QR ì£¼ë¬¸ ì‹œìŠ¤í…œ ì†Œê°œ ë° ì£¼ìš” ê¸°ëŠ¥ ì–´í•„
2. **System Intro**: 4ë‹¨ê³„ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ ì•ˆë‚´
3. **Partner Stores**: ì‹œë²”ì  + ì‹¤ì œ ì œíœ´ì  ëª©ë¡
4. **Tech Showcase**: ë³´ì•ˆê²°ì œ, í´ë¼ìš°ë“œ, ë°ì´í„°ë¶„ì„, ë§ì¶¤UI
5. **CTA Section**: íŒŒíŠ¸ë„ˆì‹­ ë¬¸ì˜ (ì´ë©”ì¼/ì „í™”)

## ì£¼ë¬¸ í¼ ë° ê²°ì œ ì‹œìŠ¤í…œ (OrderForm.js)

### í¬íŠ¸ì› ê²°ì œ ì‹œìŠ¤í…œ
```javascript
// í¬íŠ¸ì› V2 SDK ì‚¬ìš©
import * as PortOne from "@portone/browser-sdk/v2";

const paymentConfig = {
  storeId: process.env.REACT_APP_PORTONE_STORE_ID,
  channelKey: process.env.REACT_APP_PORTONE_CHANNEL_KEY,
  paymentId: `payment-${Date.now()}`,
  orderName: 'ìš”ê±°íŠ¸í¼í”Œ ì•„ì´ìŠ¤í¬ë¦¼',
  totalAmount: totalPrice,
  currency: "CURRENCY_KRW",
  payMethod: "CARD",
  redirectUrl: `${window.location.origin}/payment-complete`
};
```

### ëª¨ë°”ì¼ ê²°ì œ ì²˜ë¦¬
- **localStorage ë°±ì—…**: ëª¨ë°”ì¼ ë¦¬ë””ë ‰ì…˜ ëŒ€ë¹„ ë°ì´í„° ì €ì¥
- **PC/ëª¨ë°”ì¼ ë¶„ê¸°**: PCëŠ” ì¦‰ì‹œ ì²˜ë¦¬, ëª¨ë°”ì¼ì€ ë¦¬ë””ë ‰ì…˜ í›„ ì²˜ë¦¬
- **ê²°ì œ ìƒíƒœ**: 'completed' | 'pending'

### í¼ êµ¬ì¡°
- **í•„ìˆ˜ ì •ë³´**: ì „í™”ë²ˆí˜¸ë§Œ (SMS ì•Œë¦¼ìš©)
- **ì„ íƒ ì •ë³´**: í…Œì´ë¸”ë²ˆí˜¸, ìš”ì²­ì‚¬í•­
- **ìœ íš¨ì„± ê²€ì‚¬**: ì „í™”ë²ˆí˜¸ ì •ê·œì‹ `/^010-?\d{4}-?\d{4}$/`

## Firebase ì„¤ì • (firebase.js)

### í”„ë¡œì íŠ¸ ì •ë³´
```javascript
const firebaseConfig = {
  apiKey: "AIzaSyCRQ8wTlyL-iFSRk_8E52T7_j0o4WTjDpQ",
  authDomain: "okyogurt-8923e.firebaseapp.com",
  projectId: "okyogurt-8923e",
  storageBucket: "okyogurt-8923e.firebasestorage.app",
  messagingSenderId: "677585995800",
  appId: "1:677585995800:web:44102e3843922a6f271b6d"
};
```

### ë‚´ë³´ë‚´ëŠ” ì„œë¹„ìŠ¤
- `auth`: Firebase Authentication
- `db`: Firestore Database
- `functions`: Cloud Functions
- `storage`: Cloud Storage
- `googleProvider`: Google OAuth

## ê¸°í”„í‹°ì½˜ ì„œë¹„ìŠ¤ (gifticonService.js)

### ì£¼ìš” ë©”ì„œë“œ

#### ê¸°ë³¸ CRUD
- `createGifticon(gifticonData)`: ê¸°í”„í‹°ì½˜ ìƒì„±
- `getGifticon(gifticonId)`: IDë¡œ ì¡°íšŒ
- `getGifticons(filters)`: ëª©ë¡ ì¡°íšŒ (í•„í„°ë§/ì •ë ¬/ì œí•œ)

#### ì‚¬ìš© ì²˜ë¦¬
- `processGifticonUsage(gifticonId, usageData)`: ì‚¬ìš© ì²˜ë¦¬
- ì”ì•¡ í™•ì¸, ë§Œë£Œì¼ ì²´í¬, ì •ì§€ ìƒíƒœ í™•ì¸
- ì‚¬ìš© ë‚´ì—­ `gifticon_usage` ì»¬ë ‰ì…˜ì— ê¸°ë¡

#### ê´€ë¦¬ ê¸°ëŠ¥
- `blockGifticon(gifticonId, blockData)`: ì‚¬ìš© ì •ì§€
- `unblockGifticon(gifticonId, unblockData)`: ì‚¬ìš© ì¬ê°œ
- `rechargeGifticon(gifticonId, rechargeData)`: ì¶©ì „
- `getStatusLogs(gifticonId)`: ìƒíƒœ ë³€ê²½ ë¡œê·¸ ì¡°íšŒ

#### í†µê³„
- `getStatistics()`: ì „ì²´ ê¸°í”„í‹°ì½˜ í†µê³„
- ì´ ê°œìˆ˜, ê¸ˆì•¡, ì‚¬ìš©ì•¡, í™œì„±/ì‚¬ìš©ì™„ë£Œ/ë§Œë£Œ/ì •ì§€ ìˆ˜

### Firestore ì»¬ë ‰ì…˜ êµ¬ì¡°
- `gifticons`: ê¸°í”„í‹°ì½˜ ê¸°ë³¸ ì •ë³´
- `gifticon_usage`: ì‚¬ìš© ë‚´ì—­
- `gifticon_status_logs`: ìƒíƒœ ë³€ê²½ ë¡œê·¸

## Firebase Functions (index.js)

### Cloud Functions ëª©ë¡

#### 1. SMS ë°œì†¡ (`sendTestSMS`)
```javascript
// CoolSMS v4 API ì‚¬ìš©
const coolsmsApiKey = defineSecret('COOLSMS_API_KEY');
const coolsmsApiSecret = defineSecret('COOLSMS_API_SECRET');
```
- HMAC-SHA256 ì¸ì¦ ë°©ì‹
- ê´€ë¦¬ì ì•Œë¦¼ìš© SMS ë°œì†¡
- CORS ì„¤ì • í¬í•¨

#### 2. ì£¼ë¬¸ ì¡°íšŒ (`checkNewOrders`)
- ìµœê·¼ 5ë¶„ê°„ ìƒˆ ì£¼ë¬¸ ì¡°íšŒ
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì•Œë¦¼ ì‹œìŠ¤í…œìš©

#### 3. ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ (`testAdmin`)
- Admin SDK ë™ì‘ í™•ì¸
- Firestore ì“°ê¸° í…ŒìŠ¤íŠ¸

#### 4. ìƒì  ê³„ì • ìƒì„± (`createStoreOwner`)
- Admin SDKë¡œ ì‚¬ìš©ì ìƒì„± (ë¡œê·¸ì¸ ìƒíƒœ ì˜í–¥ ì—†ìŒ)
- Users + Stores ì»¬ë ‰ì…˜ ë™ì‹œ ìƒì„±
- storeId ì—°ê²°

### ë³´ì•ˆ ì„¤ì •
- **Secret Manager**: API í‚¤ ë³´ì•ˆ ì €ì¥
- **CORS**: ë¸Œë¼ìš°ì € ìš”ì²­ í—ˆìš©
- **Admin SDK**: ì„œë²„ì‚¬ì´ë“œ ê¶Œí•œìœ¼ë¡œ Firestore ì ‘ê·¼

## ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìš”ì•½

### ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: React 19.1.0 + React Router DOM 7.6.1
- **Backend**: Firebase (Auth, Firestore, Functions, Storage)
- **ê²°ì œ**: í¬íŠ¸ì›(PortOne) V2 SDK
- **QR**: @zxing/library (ìŠ¤ìº”) + qrcode (ìƒì„±)
- **SMS**: CoolSMS v4 API
- **UI**: ì»¤ìŠ¤í…€ CSS + ë°˜ì‘í˜• ë””ìì¸

### ë°ì´í„° í”Œë¡œìš°
1. **QR ìŠ¤ìº”** â†’ **ì£¼ë¬¸ í˜ì´ì§€** â†’ **ì¥ë°”êµ¬ë‹ˆ** â†’ **ì£¼ë¬¸ í¼**
2. **í¬íŠ¸ì› ê²°ì œ** â†’ **Firebase ì €ì¥** â†’ **SMS ì•Œë¦¼** â†’ **í¬ì¸íŠ¸ ì ë¦½**
3. **ê´€ë¦¬ì ì•Œë¦¼** â†’ **ì£¼ë¬¸ í™•ì¸** â†’ **ë°°ë‹¬** â†’ **ì™„ë£Œ ì²˜ë¦¬**

### ê¶Œí•œ ì²´ê³„
- **super_admin**: ëª¨ë“  ê¸°ëŠ¥ ì ‘ê·¼
- **admin**: ê´€ë¦¬ ê¸°ëŠ¥ (í†µê³„ ì œì™¸)
- **store_owner**: í¬ì¸íŠ¸ ë‚´ì—­ë§Œ
- **partner**: store_ownerì™€ ë™ì¼

### í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **ìµœì†Œì£¼ë¬¸**: 11,000ì›
- **ë°°ì†¡ë¹„**: 11,000ì› ë¯¸ë§Œ ì‹œ 10ì›
- **í¬ì¸íŠ¸**: ìƒì ë³„ ì°¨ë“± ì ë¦½ë¥ 
- **ê¸°í”„í‹°ì½˜**: ì¶©ì „ì‹, ì •ì§€/ì¬ê°œ ê°€ëŠ¥

ì´ì œ ì™„ì „í•œ ì•± ë¬¸ì„œê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰